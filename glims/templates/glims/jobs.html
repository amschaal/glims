{% extends "glims/dashboard.html" %}
{% block page %}Jobs{% endblock %}
{% block breadcrumbs %} Jobs {% endblock %}
{% block content %}
<script src="/static/js/pages/jobs.js"></script>
<div class="row">
      <div class="col-lg-12">
        <div class="widget">
          <div class="widget-header">
            Jobs
          </div>
          <div class="widget-body" ng-controller="JobController">
				<div remote-table url="/api/jobs/" ng-init="">
					<input ng-model="params.search" ng-change="load()" placeholder="Search"/>
					<div filter-tags></div>
					<table class="table table-striped table-condensed">
						<!-- <thead remote-headers headers="headers"></thead> -->
						<thead><th remote-header ng-repeat="header in headers"></th></thead>
						<tr ng-repeat="row in rows">
						<td><a href="{[ link(row) ]}">{[ row.id ]}</a></td>
				        <td><div field-filter field="template" alias="template" value="row.template"></div>{[ row.template ]}</td>
				        <td>
				        	<div field-filter field="status" alias="status" value="row.status"></div>{[ row.status ]}
				        	<button ng-if="['STARTED','QUEUED'].indexOf(row.status) >= 0" ng-click="terminate(row)" class="btn btn-xs btn-danger">Terminate</button>
				        	<button ng-if="!row.status" ng-click="run(row)" class="btn btn-xs btn-success">Run</button>
				        </td>
				        <td>{[ row.created ]}</td>
				        <td>{[ row.description ]}</td>
				      </tr>
					</table>
					<div remote-pagination></div>
				</div>
            </div>
          </div>
        </div>
      </div>
{% endblock %}