{% extends "base.html" %}
{% load attachment_helpers %}
{% block page %}Run{% endblock %}
{% block breadcrumbs %}<a href="{% url 'runs' %}">Runs</a> / {{run.name}} {% endblock %}
{% block content %}
<script src="/static/sequencing/js/resources/models.js"></script>
<script src="/static/sequencing/js/services/run_service.js"></script>
<script src="/static/sequencing/js/pages/run.js"></script>
<div class="row">
      <div class="col-lg-12">
        <div class="widget" ng-controller="RunController" ng-init="init({run:'{{run.id}}'});tabs['{{tab}}']=true;">
          <div class="widget-header">
            <i class="fa fa-flask"></i> {[run.run_id]}
            <div class="pull-right action-buttons">
	            <a ng-click="editRun()" class="btn btn-sm btn-default">Edit</a>
	            <div notification-subscription object-id="{{run.id}}" content-type="{{run | content_type_id}}"></div>
            </div>
          </div>
          <div class="widget-body">
          	<tabset>
          	  <tab heading="Details">
	              <table class="table">
	              	<tbody>
	              		<tr><th>Type</th><td>{[run.type.name]}</td></tr>
	              		<tr><th>Name</th><td>{[run.name]}</td></tr>
	              		<tr><th>Created</th><td>{[run.created | date:'short']}</td></tr>
	              		<tr><th>Machine</th><td>{[run.machine.name]}</td></tr>
	                	<tr><th>Description</th><td>{[run.description]}</td></tr>
	                	<tr ng-repeat="field in run.type.fields"><th>{[field.label]}</th><td>{[run.data[field.name]]}</td></tr>
	                </tbody>
	              </table>
              </tab>
              <!-- <tab heading="Data" ng-init="selection=[]">
              	<list-files base-url="{% url 'Run-detail' pk=run.id  %}" selection="selection"></list-files>
              </tab> -->
			  <object-plugins object-id="{{run.id}}" content-type="{{run | content_type_id}}"></object-plugins>              
			</tabset>   
          </div>
        </div>
      </div>
{% endblock %}